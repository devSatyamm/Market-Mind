<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MarketMind | VC Forge ‚Äî AI Pitch Advisor</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../style.css">
    <style>
        /* ‚îÄ‚îÄ Step Progress ‚îÄ‚îÄ */
        .step-track {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0;
            margin-bottom: 2.5rem;
        }

        .step-node {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.35rem;
        }

        .step-circle {
            width: 38px;
            height: 38px;
            border-radius: 50%;
            border: 2px solid var(--border);
            background: var(--bg-card);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--text-muted);
            transition: all 0.3s;
        }

        .step-circle.active {
            border-color: var(--accent-indigo);
            background: rgba(99, 102, 241, 0.15);
            color: #a5b4fc;
            box-shadow: 0 0 14px rgba(99, 102, 241, 0.35);
        }

        .step-circle.done {
            border-color: var(--accent-green);
            background: rgba(16, 185, 129, 0.15);
            color: #34d399;
        }

        .step-lbl {
            font-size: 0.7rem;
            color: var(--text-muted);
            text-align: center;
            width: 70px;
        }

        .step-lbl.active {
            color: #a5b4fc;
        }

        .step-connector {
            width: 80px;
            height: 2px;
            background: var(--border);
            margin-bottom: 1.25rem;
        }

        .step-connector.done {
            background: var(--accent-green);
        }

        /* ‚îÄ‚îÄ Persona Cards ‚îÄ‚îÄ */
        .persona-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.25rem;
            margin-bottom: 2rem;
        }

        .persona-card {
            border: 2px solid var(--border);
            background: var(--bg-card);
            border-radius: var(--r-lg);
            padding: 1.75rem 1.25rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.25s;
        }

        .persona-card:hover {
            border-color: rgba(99, 102, 241, 0.4);
            transform: translateY(-3px);
        }

        .persona-card.selected {
            border-color: var(--accent-indigo);
            background: rgba(99, 102, 241, 0.08);
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.2);
        }

        .persona-icon {
            font-size: 2rem;
            margin-bottom: 0.75rem;
        }

        .persona-title {
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 0.3rem;
        }

        .persona-desc {
            font-size: 0.78rem;
            color: var(--text-muted);
            line-height: 1.5;
        }

        /* ‚îÄ‚îÄ Idea Step ‚îÄ‚îÄ */
        .idea-textarea {
            width: 100%;
            min-height: 140px;
            resize: vertical;
            padding: 1rem;
            background: var(--bg-body);
            border: 1px solid var(--border);
            border-radius: var(--r-md);
            color: var(--text-primary);
            font-family: var(--font-body);
            font-size: 0.95rem;
            line-height: 1.6;
            transition: border-color 0.2s;
        }

        .idea-textarea:focus {
            outline: none;
            border-color: var(--accent-indigo);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .tag-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .tag-pill {
            padding: 0.3rem 0.85rem;
            border-radius: 999px;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text-muted);
            font-size: 0.78rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .tag-pill:hover,
        .tag-pill.selected {
            border-color: var(--accent-indigo);
            color: #a5b4fc;
            background: rgba(99, 102, 241, 0.1);
        }

        /* ‚îÄ‚îÄ Loading ‚îÄ‚îÄ */
        .loading-overlay {
            display: none;
            text-align: center;
            padding: 3rem;
        }

        .loading-overlay.active {
            display: block;
        }

        .ai-spinner {
            width: 56px;
            height: 56px;
            border: 3px solid var(--border);
            border-top-color: var(--accent-indigo);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .loading-steps {
            list-style: none;
            text-align: left;
            max-width: 320px;
            margin: 1.5rem auto 0;
        }

        .loading-steps li {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem 0;
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        .loading-steps li .ld-icon {
            width: 20px;
            text-align: center;
        }

        .loading-steps li.done-step {
            color: var(--accent-green);
        }

        .loading-steps li.active-step {
            color: #a5b4fc;
        }

        /* ‚îÄ‚îÄ Output ‚îÄ‚îÄ */
        .viability-ring {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: conic-gradient(var(--accent-indigo) 0% 72%, var(--border) 72% 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            margin: 0 auto 1rem;
        }

        .viability-inner {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            background: var(--bg-card);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .viability-num {
            font-size: 1.6rem;
            font-weight: 800;
            color: var(--accent-indigo);
        }

        .viability-lbl {
            font-size: 0.6rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--text-muted);
        }

        /* Judges */
        .judges-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .judge-card {
            background: var(--bg-body);
            border: 1px solid var(--border);
            border-radius: var(--r-md);
            padding: 1.25rem;
            transition: all 0.2s;
        }

        .judge-card:hover {
            border-color: rgba(99, 102, 241, 0.35);
            transform: translateY(-2px);
        }

        .judge-verdict {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .judge-name {
            font-weight: 700;
            font-size: 0.95rem;
            margin-bottom: 0.35rem;
        }

        .judge-quote {
            font-size: 0.82rem;
            color: var(--text-muted);
            line-height: 1.55;
            font-style: italic;
        }

        .judge-score {
            margin-top: 0.75rem;
            font-size: 1.2rem;
            font-weight: 800;
        }

        /* Scheme list */
        .scheme-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 0.9rem;
            border: 1px solid var(--border);
            border-radius: var(--r-md);
            margin-bottom: 0.75rem;
            background: var(--bg-body);
            transition: all 0.2s;
        }

        .scheme-item:hover {
            border-color: rgba(99, 102, 241, 0.35);
        }

        .scheme-match {
            min-width: 48px;
            text-align: center;
            font-weight: 800;
            font-size: 1rem;
            color: var(--accent-green);
        }

        .scheme-body small {
            color: var(--text-muted);
            font-size: 0.78rem;
        }

        /* Policy alert */
        .policy-alert {
            display: flex;
            align-items: flex-start;
            gap: 0.85rem;
            padding: 0.9rem 1rem;
            border-radius: var(--r-md);
            margin-bottom: 0.75rem;
            font-size: 0.85rem;
        }

        .policy-alert.red {
            background: rgba(239, 68, 68, 0.07);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        .policy-alert.yellow {
            background: rgba(245, 158, 11, 0.07);
            border: 1px solid rgba(245, 158, 11, 0.2);
        }

        .policy-alert.green {
            background: rgba(16, 185, 129, 0.07);
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        .policy-icon {
            font-size: 1.1rem;
            margin-top: 0.05rem;
        }

        .policy-title {
            font-weight: 700;
            margin-bottom: 0.2rem;
        }

        .policy-body {
            color: var(--text-muted);
            line-height: 1.5;
        }

        /* ‚îÄ‚îÄ Output tabs ‚îÄ‚îÄ */
        .out-tabs {
            display: flex;
            gap: 0.25rem;
            margin-bottom: 1.25rem;
            border-bottom: 1px solid var(--border);
        }

        .out-tab {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
            font-weight: 600;
            border-bottom: 2px solid transparent;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: -1px;
        }

        .out-tab.active {
            border-color: var(--accent-indigo);
            color: var(--text-primary);
        }

        .out-panel {
            display: none;
        }

        .out-panel.active {
            display: block;
        }

        /* Insight summary */
        .insight-row {
            display: flex;
            gap: 0.65rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }

        .insight-chip {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.35rem 0.75rem;
            border-radius: 999px;
            font-size: 0.78rem;
            font-weight: 600;
            background: var(--bg-body);
            border: 1px solid var(--border);
        }

        /* Step card */
        .step-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--r-lg);
            padding: 2rem;
        }
    </style>
</head>

<body>

    <!-- Header -->
    <header class="main-header">
        <a href="../index.html" class="logo">
            <span class="logo-icon-sm"><i class="fa-solid fa-cube"></i></span>
            MARKET<span class="logo-sub">MIND</span>
        </a>
        <div class="search-bar">
            <i class="fa-solid fa-magnifying-glass"></i>
            <input type="search" placeholder="Search the forge‚Ä¶">
        </div>
        <nav class="nav-menu">
            <a href="../dashboard.html" class="nav-item">Dashboard</a>
            <a href="strategy.html" class="nav-item">Simulations</a>
            <a href="scheme_oracle.html" class="nav-item">Funding</a>
            <a href="vc_forge.html" class="nav-item active">VC Forge</a>
            <a href="global_policies.html" class="nav-item">Policies</a>
        </nav>
        <div class="flex items-center gap-3">
            <button class="btn btn-icon btn-ghost relative">
                <i class="fa-regular fa-bell"></i>
                <span class="notif-dot"></span>
            </button>
            <button class="btn btn-icon btn-ghost"><i class="fa-solid fa-gear"></i></button>
            <a href="profile.html" class="profile-avatar-sm">
                <img src="https://ui-avatars.com/api/?name=Alex+M&background=6366f1&color=fff&size=128" alt="Profile">
            </a>
        </div>
    </header>

    <div class="container" style="max-width:900px;">

        <!-- Page Header -->
        <div class="page-header" style="flex-direction:column; align-items:flex-start; gap:0.4rem; margin-bottom:2rem;">
            <div class="flex items-center gap-3">
                <div
                    style="width:42px; height:42px; border-radius:12px; background:linear-gradient(135deg,rgba(99,102,241,0.3),rgba(59,130,246,0.15)); display:flex; align-items:center; justify-content:center; font-size:1.25rem; color:#a5b4fc;">
                    <i class="fa-solid fa-flask-vial"></i>
                </div>
                <h1 style="font-size:1.8rem;">VC Forge <span
                        style="font-size:0.85rem; font-weight:500; color:var(--text-muted); vertical-align:middle; margin-left:0.3rem; border:1px solid rgba(99,102,241,0.3); border-radius:999px; padding:0.15rem 0.65rem; background:rgba(99,102,241,0.08);">AI
                        PITCH ADVISOR</span></h1>
            </div>
            <p class="text-muted text-sm">Describe your idea ‚Üí get Shark Tank-style AI critique, matched govt schemes
                &amp; policy alerts.</p>
        </div>

        <!-- Step Progress -->
        <div class="step-track" id="step-track">
            <div class="step-node">
                <div class="step-circle active" id="sc-1">1</div>
                <div class="step-lbl active" id="sl-1">Who are you?</div>
            </div>
            <div class="step-connector" id="conn-1"></div>
            <div class="step-node">
                <div class="step-circle" id="sc-2">2</div>
                <div class="step-lbl" id="sl-2">Your Idea</div>
            </div>
            <div class="step-connector" id="conn-2"></div>
            <div class="step-node">
                <div class="step-circle" id="sc-3">3</div>
                <div class="step-lbl" id="sl-3">AI Analysis</div>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê STEP 1 ‚ïê‚ïê‚ïê -->
        <div id="step-1" class="step-card">
            <h2 class="section-title mb-5"><i class="fa-solid fa-user-tag"></i> Tell us about yourself</h2>

            <div class="persona-grid">
                <div class="persona-card selected" onclick="selectPersona(this,'student')">
                    <div class="persona-icon">üéì</div>
                    <div class="persona-title">Student</div>
                    <div class="persona-desc">Learning, side-projects, grant eligibility, low capital</div>
                </div>
                <div class="persona-card" onclick="selectPersona(this,'founder')">
                    <div class="persona-icon">üöÄ</div>
                    <div class="persona-title">Founder</div>
                    <div class="persona-desc">Building a startup, fundraising, scaling a product</div>
                </div>
                <div class="persona-card" onclick="selectPersona(this,'explorer')">
                    <div class="persona-icon">üîç</div>
                    <div class="persona-title">Explorer</div>
                    <div class="persona-desc">Just researching, validating, curious about feasibility</div>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-4 mt-4">
                <div class="form-group">
                    <label class="form-label">Available Budget (‚Çπ or $)</label>
                    <input type="text" id="budget-input" placeholder="e.g. ‚Çπ5,00,000 or $10,000" value="">
                </div>
                <div class="form-group">
                    <label class="form-label">Target Market</label>
                    <select id="market-select">
                        <option value="india">India</option>
                        <option value="us">United States</option>
                        <option value="eu">European Union</option>
                        <option value="global">Global / Multi-market</option>
                        <option value="sea">South-East Asia</option>
                    </select>
                </div>
            </div>

            <div class="flex justify-end mt-5">
                <button class="btn btn-primary" onclick="goToStep2()">Continue <i
                        class="fa-solid fa-arrow-right"></i></button>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê STEP 2 ‚ïê‚ïê‚ïê -->
        <div id="step-2" class="step-card" style="display:none;">
            <h2 class="section-title mb-4"><i class="fa-solid fa-lightbulb"></i> Describe your idea</h2>
            <p class="text-sm text-muted mb-4">Be specific ‚Äî mention the problem you solve, who your customers are, and
                how you plan to make money. The more detail you give, the sharper the AI analysis.</p>

            <textarea class="idea-textarea" id="idea-text"
                placeholder="e.g. I want to build an app that uses AI to help Indian farmers predict crop prices 3 months in advance using satellite data and local mandi records, so they can time their harvest and avoid selling at a loss..."></textarea>

            <div class="mt-3">
                <div class="text-xs text-muted mb-2 font-bold">Quick tag your sector (optional):</div>
                <div class="tag-selector" id="tag-selector">
                    <div class="tag-pill" onclick="toggleTag(this)">ü§ñ AI / ML</div>
                    <div class="tag-pill" onclick="toggleTag(this)">üåæ AgriTech</div>
                    <div class="tag-pill" onclick="toggleTag(this)">üíä HealthTech</div>
                    <div class="tag-pill" onclick="toggleTag(this)">‚ö° CleanTech</div>
                    <div class="tag-pill" onclick="toggleTag(this)">üí∏ FinTech</div>
                    <div class="tag-pill" onclick="toggleTag(this)">üè≠ Manufacturing</div>
                    <div class="tag-pill" onclick="toggleTag(this)">üõçÔ∏è D2C / E-com</div>
                    <div class="tag-pill" onclick="toggleTag(this)">üìö EdTech</div>
                    <div class="tag-pill" onclick="toggleTag(this)">üöó Mobility</div>
                    <div class="tag-pill" onclick="toggleTag(this)">üîí DeepTech</div>
                </div>
            </div>

            <div class="flex justify-between mt-5">
                <button class="btn btn-outline" onclick="goToStep1()"><i class="fa-solid fa-arrow-left"></i>
                    Back</button>
                <button class="btn btn-primary" onclick="runAI()"><i class="fa-solid fa-wand-magic-sparkles"></i>
                    Analyse My Idea</button>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê LOADING ‚ïê‚ïê‚ïê -->
        <div id="loading-view" class="step-card" style="display:none;">
            <div class="loading-overlay active">
                <div class="ai-spinner"></div>
                <div class="font-bold text-lg mb-1">AI Panel Convening‚Ä¶</div>
                <div class="text-sm text-muted">Our virtual Shark Tank judges are reviewing your pitch</div>
                <ul class="loading-steps" id="loading-steps">
                    <li id="ls-1"><span class="ld-icon"><i class="fa-solid fa-circle-notch fa-spin"></i></span> Reading
                        your pitch &amp; context‚Ä¶</li>
                    <li id="ls-2" style="opacity:0.4;"><span class="ld-icon"><i
                                class="fa-regular fa-lightbulb"></i></span> Scoring viability across 12 dimensions‚Ä¶</li>
                    <li id="ls-3" style="opacity:0.4;"><span class="ld-icon"><i
                                class="fa-solid fa-building-columns"></i></span> Matching govt schemes &amp; grants‚Ä¶
                    </li>
                    <li id="ls-4" style="opacity:0.4;"><span class="ld-icon"><i class="fa-solid fa-gavel"></i></span>
                        Scanning 45 regulatory databases‚Ä¶</li>
                    <li id="ls-5" style="opacity:0.4;"><span class="ld-icon"><i
                                class="fa-regular fa-check-circle"></i></span> Compiling your Forge Report‚Ä¶</li>
                </ul>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê STEP 3 ‚Äî OUTPUT ‚ïê‚ïê‚ïê -->
        <div id="step-3" style="display:none;">

            <!-- Summary row -->
            <div class="card mb-4"
                style="padding:1.5rem; display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap; gap:1rem;">
                <div>
                    <div class="text-xs text-muted uppercase tracking-widest mb-1 font-bold">Pitch Verdict</div>
                    <div id="verdict-text" class="text-xl font-bold">Promising ‚Äî Needs Refinement</div>
                    <div class="insight-row mt-3">
                        <div class="insight-chip"><span style="color:var(--accent-green);">‚óè</span> <span
                                id="chip-persona">Founder</span></div>
                        <div class="insight-chip"><span style="color:var(--accent-blue);">‚óè</span> <span
                                id="chip-market">India Market</span></div>
                        <div class="insight-chip"><span style="color:var(--accent-cyan);">‚óè</span> <span
                                id="chip-sector">AgriTech / AI</span></div>
                        <div class="insight-chip"><span style="color:var(--accent-yellow);">‚óè</span> <span
                                id="chip-budget">Budget: ‚Çπ5L</span></div>
                    </div>
                </div>
                <div style="text-align:center;">
                    <div class="viability-ring" id="viability-ring">
                        <div class="viability-inner">
                            <div class="viability-num" id="viability-num">72</div>
                            <div class="viability-lbl">Viability</div>
                        </div>
                    </div>
                    <div class="text-xs text-muted mt-1">Out of 100</div>
                </div>
            </div>

            <!-- Out Tabs -->
            <div class="out-tabs">
                <div class="out-tab active" onclick="switchTab(this,'tab-sharks')"><i
                        class="fa-solid fa-user-tie mr-1"></i> Shark Panel</div>
                <div class="out-tab" onclick="switchTab(this,'tab-schemes')"><i class="fa-solid fa-handshake mr-1"></i>
                    Matched Schemes</div>
                <div class="out-tab" onclick="switchTab(this,'tab-policies')"><i class="fa-solid fa-gavel mr-1"></i>
                    Policy Alerts</div>
                <div class="out-tab" onclick="switchTab(this,'tab-roadmap')"><i class="fa-solid fa-road mr-1"></i> AI
                    Roadmap</div>
            </div>

            <!-- Shark Panel tab -->
            <div class="out-panel active" id="tab-sharks">
                <div class="judges-grid" id="judges-grid">
                    <!-- Dynamically populated -->
                </div>

                <div class="card mt-4" style="padding:1.5rem;">
                    <div class="text-xs text-muted uppercase font-bold mb-3 tracking-widest">Panel Summary</div>
                    <p class="text-sm leading-relaxed" id="panel-summary" style="color:var(--text-secondary);"></p>
                    <div class="grid grid-cols-3 gap-3 mt-4">
                        <div class="metric-box">
                            <div class="text-xs text-muted mb-1">Market Size</div>
                            <div class="font-bold" id="m-market">$2.4B</div>
                        </div>
                        <div class="metric-box">
                            <div class="text-xs text-muted mb-1">TAM Capture</div>
                            <div class="font-bold" id="m-tam">0.3‚Äì1.2%</div>
                        </div>
                        <div class="metric-box">
                            <div class="text-xs text-muted mb-1">Break-even</div>
                            <div class="font-bold" id="m-be">18‚Äì24 Mo</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Schemes tab -->
            <div class="out-panel" id="tab-schemes">
                <div id="schemes-list"></div>
                <div class="text-center mt-4">
                    <a href="scheme_oracle.html" class="btn btn-outline"><i class="fa-solid fa-database"></i> Browse
                        Full Scheme Database</a>
                </div>
            </div>

            <!-- Policies tab -->
            <div class="out-panel" id="tab-policies">
                <div id="policies-list"></div>
                <div class="text-center mt-4">
                    <a href="global_policies.html" class="btn btn-outline"><i class="fa-solid fa-globe"></i> View Global
                        Policy Database</a>
                </div>
            </div>

            <!-- Roadmap tab -->
            <div class="out-panel" id="tab-roadmap">
                <div id="roadmap-list"></div>
            </div>

            <!-- Actions -->
            <div class="flex gap-3 mt-6">
                <button class="btn btn-outline" onclick="goToStep1()"><i class="fa-solid fa-rotate-left"></i> Start
                    Over</button>
                <button class="btn btn-primary" onclick="window.print()"><i class="fa-solid fa-download"></i> Export
                    Report</button>
            </div>

        </div><!-- /step-3 -->
    </div><!-- /container -->

    <script src="../script.js"></script>
    <script>
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        //  STATE
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        let state = { persona: 'student', budget: '', market: 'india', idea: '', tags: [] };

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        //  STEP NAVIGATION
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function setStepUI(step) {
            [1, 2, 3].forEach(i => {
                document.getElementById('step-' + i) && (document.getElementById('step-' + i).style.display = 'none');
            });
            document.getElementById('loading-view').style.display = 'none';
            document.getElementById('step-3').style.display = 'none';

            // Circles
            for (let i = 1; i <= 3; i++) {
                const sc = document.getElementById('sc-' + i);
                const sl = document.getElementById('sl-' + i);
                sc.className = 'step-circle';
                sl.className = 'step-lbl';
                if (i < step) { sc.classList.add('done'); sc.innerHTML = '<i class="fa-solid fa-check"></i>'; }
                else if (i === step) { sc.classList.add('active'); sc.textContent = i; sl.classList.add('active'); }
                else { sc.textContent = i; }
            }
            for (let i = 1; i <= 2; i++) {
                const conn = document.getElementById('conn-' + i);
                conn.className = 'step-connector' + (i < step ? ' done' : '');
            }
        }

        function goToStep1() {
            setStepUI(1);
            document.getElementById('step-1').style.display = 'block';
        }
        function goToStep2() {
            state.budget = document.getElementById('budget-input').value || '‚Çπ5,00,000';
            state.market = document.getElementById('market-select').value;
            setStepUI(2);
            document.getElementById('step-2').style.display = 'block';
        }

        function selectPersona(el, type) {
            document.querySelectorAll('.persona-card').forEach(c => c.classList.remove('selected'));
            el.classList.add('selected');
            state.persona = type;
        }
        function toggleTag(el) {
            el.classList.toggle('selected');
            const tag = el.textContent.trim();
            if (el.classList.contains('selected')) { if (!state.tags.includes(tag)) state.tags.push(tag); }
            else { state.tags = state.tags.filter(t => t !== tag); }
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        //  AI ANALYSIS (SIMULATED)
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function runAI() {
            state.idea = document.getElementById('idea-text').value.trim();
            if (state.idea.length < 20) {
                alert('Please describe your idea in at least a sentence or two for meaningful analysis.');
                return;
            }
            state.tags = Array.from(document.querySelectorAll('.tag-pill.selected')).map(t => t.textContent.trim());

            // Show loading
            setStepUI(3);
            document.getElementById('loading-view').style.display = 'block';

            const steps = ['ls-1', 'ls-2', 'ls-3', 'ls-4', 'ls-5'];
            let current = 0;
            const interval = setInterval(() => {
                if (current > 0) {
                    const prev = document.getElementById(steps[current - 1]);
                    prev.innerHTML = prev.innerHTML.replace('fa-spin', '').replace('fa-circle-notch', 'fa-check');
                    prev.classList.add('done-step');
                    prev.style.opacity = '1';
                }
                if (current < steps.length) {
                    const cur = document.getElementById(steps[current]);
                    cur.style.opacity = '1';
                    cur.classList.add('active-step');
                    current++;
                } else {
                    clearInterval(interval);
                    setTimeout(showOutput, 500);
                }
            }, 900);
        }

        // ‚îÄ‚îÄ Deterministic score from idea text length + randomness
        function getScore(idea) {
            const base = 55 + Math.min(idea.length / 15, 25);
            return Math.min(Math.round(base + (Math.random() * 12 - 6)), 96);
        }

        function showOutput() {
            document.getElementById('loading-view').style.display = 'none';
            document.getElementById('step-3').style.display = 'block';

            const score = getScore(state.idea);
            const market = state.market;
            const persona = state.persona;
            const tags = state.tags.join(', ') || 'General Tech';

            // Viability ring
            const pct = score;
            document.getElementById('viability-ring').style.background =
                `conic-gradient(var(--accent-indigo) 0% ${pct}%, var(--border) ${pct}% 100%)`;
            document.getElementById('viability-num').textContent = score;

            // Verdict
            let verdictText = score >= 80 ? 'üî• Highly Investable ‚Äî Strong Product-Market Fit'
                : score >= 65 ? '‚úÖ Promising ‚Äî Needs Refinement'
                    : score >= 50 ? '‚ö° Early Stage ‚Äî Validate First'
                        : '‚ö†Ô∏è High Risk ‚Äî Rethink Core Assumptions';
            document.getElementById('verdict-text').textContent = verdictText;

            // Chips
            document.getElementById('chip-persona').textContent = capitalize(persona);
            document.getElementById('chip-market').textContent = getMarketLabel(market);
            document.getElementById('chip-sector').textContent = state.tags.slice(0, 2).map(t => t.split(' ').slice(1).join(' ')).join(' / ') || 'General';
            document.getElementById('chip-budget').textContent = 'Budget: ' + (state.budget || 'N/A');

            buildJudges(score, tags, market);
            buildSchemes(market, tags);
            buildPolicies(market, state.idea);
            buildRoadmap(persona, score);

            // Summary
            document.getElementById('panel-summary').textContent =
                `Our AI panel analysed your idea against ${getMarketLabel(market)} market conditions, competitive landscape, and regulatory environment. ` +
                `The concept scores ${score}/100 on viability ‚Äî driven by ${score > 70 ? 'strong problem-solution fit and clear monetisation pathway' : 'an identified real problem but unclear monetisation and competitive moat'}. ` +
                `Key risks: market timing, regulatory hurdles${market === 'india' ? ' (India-specific policy layers)' : ''}, and execution bandwidth. ` +
                `Immediate next steps include customer discovery interviews and a lean MVP to validate core assumptions.`;

            document.getElementById('m-market').textContent = pickRandom(['$1.8B', '$3.2B', '$800M', '$12B', '$6.4B']);
            document.getElementById('m-tam').textContent = pickRandom(['0.3‚Äì1.2%', '0.8‚Äì2.1%', '1.5‚Äì4%', '0.1‚Äì0.5%']);
            document.getElementById('m-be').textContent = pickRandom(['12‚Äì18 Mo', '18‚Äì24 Mo', '24‚Äì36 Mo', '8‚Äì14 Mo']);
        }

        function buildJudges(score, tags, market) {
            const judges = [
                {
                    name: 'Priya Ventures', role: 'Growth Equity', emoji: 'üë©‚Äçüíº',
                    color: score >= 70 ? 'var(--accent-green)' : 'var(--accent-yellow)',
                    verdict: score >= 70 ? 'IN ‚Äî Excited' : 'MAYBE ‚Äî Conditions',
                    verdictColor: score >= 70 ? '#34d399' : '#fbbf24',
                    scoreVal: Math.round(score * 0.95),
                    quote: score >= 70
                        ? `"The problem is real and large. I love that you've identified a specific underserved segment. I'm in at a $2M pre-seed for 8% ‚Äî but I want to see a working prototype in 90 days."`
                        : `"The idea is interesting but the go-to-market is fuzzy. Who is the exact first customer? Come back with 10 signed LOIs and I'll reconsider."`
                },
                {
                    name: 'Arjun Capital', role: 'Deep Tech VC', emoji: 'üë®‚Äçüíª',
                    color: score >= 60 ? 'var(--accent-blue)' : 'var(--accent-red)',
                    verdict: score >= 60 ? 'IN ‚Äî Conditionally' : 'OUT',
                    verdictColor: score >= 60 ? '#60a5fa' : '#f87171',
                    scoreVal: Math.round(score * 1.05 > 100 ? 100 : score * 1.05),
                    quote: score >= 60
                        ? `"The technology risk is manageable. My concern is team. Do you have a technical co-founder? That's table stakes for me in this space. Solve that ‚Äî I'll write the check."`
                        : `"Honestly, I've seen 20 pitches like this. The moat is missing. What stops a large incumbent from copying this in 6 months? I'm out until that's answered."`
                },
                {
                    name: 'Maya Mehta', role: 'Consumer & D2C', emoji: 'üë©‚Äçüé§',
                    color: score >= 75 ? 'var(--accent-indigo)' : 'var(--accent-yellow)',
                    verdict: score >= 75 ? 'IN ‚Äî Lead Investor' : 'EXPLORING',
                    verdictColor: score >= 75 ? '#a5b4fc' : '#fbbf24',
                    scoreVal: Math.round(score * 0.98),
                    quote: score >= 75
                        ? `"This has breakout potential. Unit economics look healthy on paper. I can bring 3 strategic angels alongside this round. Let's talk term sheet this week."`
                        : `"Too early for me at this stage but the thesis is right. Two things: price sensitivity testing and a viral growth loop. Nail those and call me in 6 months."`
                }
            ];

            const container = document.getElementById('judges-grid');
            container.innerHTML = judges.map(j => `
            <div class="judge-card">
                <div class="judge-verdict" style="color:${j.verdictColor};">${j.emoji} ${j.verdict}</div>
                <div class="judge-name">${j.name}</div>
                <div class="text-xs text-muted mb-2">${j.role}</div>
                <div class="judge-quote">${j.quote}</div>
                <div class="judge-score" style="color:${j.color};">${j.scoreVal}<span class="text-xs text-muted font-normal">/100</span></div>
            </div>
        `).join('');
        }

        function buildSchemes(market, tags) {
            const allSchemes = {
                india: [
                    { name: 'Startup India Seed Fund', org: 'DPIIT, Govt of India', match: 94, amount: '‚Çπ20L ‚Äì ‚Çπ50L', deadline: 'Rolling', desc: 'Non-dilutive seed funding for DPIIT-recognised startups proving market viability.' },
                    { name: 'SISFS ‚Äî Incubator Route', org: 'Startup India', match: 88, amount: '‚Çπ5L ‚Äì ‚Çπ25L', deadline: 'Quarterly', desc: 'Technical support, office space and seed grant via registered incubators.' },
                    { name: 'TIDE 2.0 ‚Äî MeitY Scheme', org: 'Ministry of Electronics & IT', match: 81, amount: '‚Çπ30L (tech-focused)', deadline: 'Dec 2026', desc: 'Support for IoT, AI/ML, blockchain and cybersecurity startups at pre-seed stage.' },
                    { name: 'Atal Innovation Mission Grant', org: 'NITI Aayog', match: 77, amount: '‚Çπ10L ‚Äì ‚Çπ1Cr', deadline: 'Jan 2027', desc: 'Supports innovation-driven enterprises with mentorship and infrastructure.' },
                    { name: 'SAMPADA ‚Äî Agri & Food Tech', org: 'Ministry of Food Processing', match: 72, amount: 'Up to ‚Çπ2Cr', deadline: 'Rolling', desc: 'Specifically for agri-processing and food supply chain technology startups.' },
                ],
                us: [
                    { name: 'SBIR Phase I Grant', org: 'NSF / SBA', match: 91, amount: '$150K ‚Äì $275K', deadline: 'Rolling', desc: 'Non-dilutive R&D funding for small businesses doing high-risk, high-reward research.' },
                    { name: 'Y Combinator W27', org: 'Y Combinator', match: 85, amount: '$125K for 7%', deadline: 'Jan 2027', desc: 'World\'s most recognised accelerator. 3-month program + Demo Day. Rolling applications.' },
                    { name: 'Founders Fund ‚Äî Pre-seed', org: 'FF Venture Capital', match: 79, amount: '$500K ‚Äì $2M', deadline: 'Rolling', desc: 'Deep-tech focused early stage VC. Particularly interested in defense-dual-use tech.' },
                    { name: 'DOE Clean Energy Incubator', org: 'Dept. of Energy', match: 74, amount: 'Up to $750K', deadline: 'Mar 2027', desc: 'Clean energy hardware and software startups building at the climate frontier.' },
                ],
                eu: [
                    { name: 'Horizon Europe EIC Accelerator', org: 'European Commission', match: 89, amount: '‚Ç¨2.5M (+ equity)', deadline: 'Mar 2027', desc: 'Europe\'s flagship deep-tech program for breakthrough innovation with global potential.' },
                    { name: 'EIC Pathfinder', org: 'European Commission', match: 83, amount: '‚Ç¨3M ‚Äì ‚Ç¨4M', deadline: 'Feb 2027', desc: 'Funding for highly speculative, long-horizon research potentially leading to breakthrough tech.' },
                    { name: 'InvestEU Guarantee', org: 'EIB / EU Banks', match: 75, amount: 'Guarantee up to ‚Ç¨15M', deadline: 'Rolling', desc: 'Loan guarantee scheme for innovative SMEs. Reduces risk for bank lenders.' },
                ],
                global: [
                    { name: 'Draper Startup House Seed', org: 'Draper VC', match: 80, amount: '$25K ‚Äì $150K', deadline: 'Rolling', desc: 'Global accelerator and investment arm. Agnostic to sector, geography-flexible.' },
                    { name: 'Google for Startups Fund', org: 'Google', match: 86, amount: 'Up to $350K (credits + cash)', deadline: 'Rolling', desc: 'AI-first startups. Includes cloud credits, go-to-market support, and network access.' },
                ],
                sea: [
                    { name: 'Enterprise Development Fund', org: 'Singapore EDB', match: 87, amount: 'SGD 500K', deadline: 'Rolling', desc: 'Singapore-based startups. Co-funded with private investors at 4:1 ratio.' },
                    { name: 'Indonesia Startup Visa', org: 'BKPM Indonesia', match: 76, amount: 'Facilitated licenses', deadline: 'Rolling', desc: 'Fast-tracks market access and regulatory approvals for tech startups in SEA.' },
                ]
            };

            const schemes = allSchemes[market] || allSchemes['india'];
            const container = document.getElementById('schemes-list');
            container.innerHTML = schemes.map(s => `
            <div class="scheme-item">
                <div class="scheme-match">${s.match}%<div style="font-size:0.65rem; font-weight:400; color:var(--text-muted);">Match</div></div>
                <div class="scheme-body" style="flex:1;">
                    <div class="font-bold text-sm">${s.name}</div>
                    <small>${s.org} &nbsp;¬∑&nbsp; ${s.amount} &nbsp;¬∑&nbsp; <i class="fa-regular fa-calendar"></i> ${s.deadline}</small>
                    <div class="text-sm text-muted mt-1" style="line-height:1.5;">${s.desc}</div>
                </div>
                <button class="btn btn-sm btn-outline" style="white-space:nowrap; align-self:flex-start;">Apply <i class="fa-solid fa-arrow-right"></i></button>
            </div>
        `).join('');
        }

        function buildPolicies(market, idea) {
            const policies = {
                india: [
                    { type: 'red', icon: 'üö´', title: 'FDI Restrictions in Multi-brand Retail', body: 'If your product involves direct foreign investment in multi-brand retail (selling to Indian consumers via foreign-owned entity), FDI is capped at 51% and requires prior govt approval. Affects platforms with international co-founders.' },
                    { type: 'red', icon: '‚ö†Ô∏è', title: 'Data Localisation ‚Äî Digital Personal Data Protection Act 2023', body: 'DPDP Act mandates user data of Indian citizens must be processed/stored in India for certain categories. Non-compliance penalties up to ‚Çπ250Cr. Affects any app collecting personal data.' },
                    { type: 'yellow', icon: 'üì¶', title: 'Import Duty Alert ‚Äî Electronics Hardware', body: 'Basic Customs Duty on electronics components has been raised to 25% (Budget 2025). Startups manufacturing hardware using imported PCBs/chips will face increased COGS. Consider PLI Scheme.' },
                    { type: 'yellow', icon: 'üåæ', title: 'APMC Act Bypassable via eNAM Platform', body: 'Agricultural Produce Market Committee laws in several states make direct farmer-to-consumer selling complex. However, eNAM digital integration now offers a legal route. License required in 12 states.' },
                    { type: 'green', icon: '‚úÖ', title: 'PLI Scheme Eligibility', body: 'Production Linked Incentive gives 4‚Äì6% incentive on incremental sales for electronics, pharmaceuticals, food processing and 11 other sectors. Applicable if manufacturing in India.' },
                    { type: 'green', icon: 'üè∑Ô∏è', title: 'Startup Tax Holiday ‚Äî Sec 80-IAC', body: '100% tax holiday for 3 consecutive years (out of 10 years from incorporation) for DPIIT-recognised startups. Turnover must not exceed ‚Çπ100Cr during the qualifying year.' },
                ],
                us: [
                    { type: 'red', icon: 'üèõÔ∏è', title: 'SEC Regulation on AI-driven Financial Advice', body: 'If your product gives investment recommendations, it may qualify as an "Investment Adviser" under the Investment Advisers Act. Requires SEC registration. $1M+ compliance cost if not structured correctly.' },
                    { type: 'yellow', icon: 'üîí', title: 'CCPA / CPA Data Privacy Laws', body: 'California Consumer Privacy Act applies to any business serving CA residents with $25M+ revenue OR 100K+ user records. Similar laws now active in 15+ states. Compliance is non-optional.' },
                    { type: 'green', icon: 'üí°', title: 'R&D Tax Credit ‚Äî Section 41', body: 'Up to 20% of qualifying research expenses can be claimed as a federal tax credit. For startups with <$5M in revenue, up to $250K can offset payroll taxes before profitability.' },
                ],
                eu: [
                    { type: 'red', icon: 'ü§ñ', title: 'EU AI Act ‚Äî High-Risk Classification', body: 'If your AI system makes decisions in healthcare, education, employment or credit ‚Äî it\'s classified "high risk" under the EU AI Act. Requires conformity assessment, human oversight, and CE marking by 2026.' },
                    { type: 'yellow', icon: 'üîê', title: 'GDPR Compliance Mandatory', body: 'Any product handling EU citizens\' data must be GDPR-compliant. Data minimisation, consent, right-to-erasure are baseline requirements. Fines up to 4% of global annual revenue.' },
                    { type: 'green', icon: 'üåø', title: 'EU Green Deal Grants', body: 'Tech solutions that demonstrably reduce carbon emissions qualify for European Green Deal grants. Up to ‚Ç¨5M available for climate-positive tech startups with an EU nexus.' },
                ],
            };

            const list = policies[market] || policies['india'];
            const container = document.getElementById('policies-list');
            container.innerHTML = list.map(p => `
            <div class="policy-alert ${p.type}">
                <div class="policy-icon">${p.icon}</div>
                <div>
                    <div class="policy-title">${p.title}</div>
                    <div class="policy-body">${p.body}</div>
                </div>
            </div>
        `).join('');
        }

        function buildRoadmap(persona, score) {
            const roadmapItems = [
                { icon: 'üî¨', week: 'Week 1‚Äì2', title: 'Customer Discovery', body: 'Conduct 20+ structured customer interviews. Validate the problem, not your solution. Record willingness-to-pay signals.', color: 'var(--accent-blue)' },
                { icon: 'üó∫Ô∏è', week: 'Week 3‚Äì4', title: 'Define MVP Scope', body: 'Strip to the single core workflow that solves Day-1 pain. No nice-to-haves. Build a clickable Figma prototype before writing any code.', color: 'var(--accent-indigo)' },
                { icon: '‚öôÔ∏è', week: 'Month 2', title: 'Build & Ship v0.1', body: 'Minimum Lovable Product. Get 10 real users using it. Observe, don\'t pitch. Fix the 3 biggest friction points.', color: 'var(--accent-cyan)' },
                { icon: 'üìà', week: 'Month 3', title: 'Metrics & Fundraise Prep', body: 'Track DAU, retention D7/D30, NPS. If metrics are green, prepare a 10-slide deck and approach 5 seed-stage VCs in your market.', color: 'var(--accent-green)' },
                { icon: 'üí∞', week: 'Month 4‚Äì6', title: 'Raise Pre-seed Round', body: `Target $${persona === 'student' ? '100K‚Äì500K' : '500K‚Äì2M'} at a $${persona === 'student' ? '1M‚Äì3M' : '3M‚Äì8M'} valuation cap. Use the matched schemes above for non-dilutive capital first.`, color: 'var(--accent-yellow)' },
            ];

            const container = document.getElementById('roadmap-list');
            container.innerHTML = roadmapItems.map((r, i) => `
            <div class="roadmap-card" style="margin-bottom:0.75rem; position:relative; padding-left:1.5rem; border-left:3px solid ${r.color};">
                <div class="text-xs text-muted font-bold mb-1 uppercase tracking-widest">${r.week}</div>
                <div class="font-bold mb-1">${r.icon} ${r.title}</div>
                <div class="text-sm text-muted" style="line-height:1.6;">${r.body}</div>
            </div>
        `).join('');
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        //  HELPERS
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function switchTab(el, panelId) {
            document.querySelectorAll('.out-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.out-panel').forEach(p => p.classList.remove('active'));
            el.classList.add('active');
            document.getElementById(panelId).classList.add('active');
        }
        function capitalize(s) { return s.charAt(0).toUpperCase() + s.slice(1); }
        function pickRandom(arr) { return arr[Math.floor(Math.random() * arr.length)]; }
        function getMarketLabel(m) {
            return { india: 'India Market', us: 'US Market', eu: 'EU Market', global: 'Global Markets', sea: 'SEA Market' }[m] || m;
        }
    </script>
</body>

</html>